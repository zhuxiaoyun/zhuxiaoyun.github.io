---
title: php - 实现不同网站登录跨域的问题
date: 2018-03-07 16:36:36
categories:
- 实用技术 # 一级分类
- 个人博客 # 二级分类 
tags:
- 实用
- 个人博客
---
## php - 实现不同网站登录跨域的问题
### 描述：例如 A网站 用的test1.com B网站用的是test2.com 2个网站用的是2个服务器了！！ 也就是用了2个数据库了！
如果让用户 登录A网站的同时 打开B网站 也会登录呢？

可以用sso单点登录解决这个问题，本质是不同的域名能同时记录同一个cookie

很久之前做过这个功能，有点忘了，大概的步骤：

例如你在test1.com登录成功后，会给一个应用中心发请求，这个应用中心保存着所有的sso登录的设置cookie的url，每个应用组装成一个script标签返回给你

你接收到这些script标签后，让这些标签执行就可以了，例如B站点的响应中就会有setCookie这个响应头，这样B站点的登录cookie就在你的浏览器上保存了

每个站点在你的浏览器上都有cookie了，自然就处于登录状态了

很久之前做过的，大体思想是这些

实现地址：https://github.com/jasny/sso
